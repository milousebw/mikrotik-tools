<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Outils Réseau</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-6 font-sans">
  <div class="max-w-2xl mx-auto space-y-6">
    <h1 class="text-3xl font-bold mb-4">🛠️ Outils Réseau</h1>

    <div class="space-x-2">
      <button onclick="showTab('mac')" class="px-4 py-2 bg-indigo-600 rounded">🔍 MAC Vendor</button>
      <button onclick="showTab('speed')" class="px-4 py-2 bg-green-600 rounded">📶 Test Débit</button>
      <button onclick="showTab('tts')" class="px-4 py-2 bg-pink-600 rounded">🔊 TTS</button>
    </div>

    <div id="tts" class="tab">
      <h2 class="text-xl font-semibold mb-2">Synthèse vocale (TTS Google)</h2>
      <textarea id="ttsText" class="w-full p-3 text-black rounded mb-2" rows="4" placeholder="Texte à lire..."></textarea>
      <select id="ttsLang" class="w-full p-2 text-black rounded mb-2">
        <option value="fr">🇫🇷 Français (gTTS)</option>
        <option value="en">🇺🇸 English (gTTS)</option>
      </select>
      <button onclick="sendTTS()" class="bg-pink-600 px-4 py-2 rounded">Lire</button>
      <div id="ttsResult" class="mt-4"></div>
    </div>
  </div>

  <script>
    function showTab(id) {
      document.querySelectorAll('.tab').forEach(t => t.style.display = 'none');
      document.getElementById(id).style.display = 'block';
    }
    showTab('tts');

    async function sendTTS() {
      const text = document.getElementById('ttsText').value;
      const lang = document.getElementById('ttsLang').value;
      const result = document.getElementById('ttsResult');
      result.innerHTML = '⏳ Génération...';

      const res = await fetch('/tts', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text, lang })
      });

      const data = await res.json();
      if (data.audio) {
        result.innerHTML = \`<audio controls autoplay class="mt-4 w-full"><source src="\${data.audio}" type="audio/mp3"></audio>\`;
      } else {
        result.innerHTML = "❌ Erreur TTS : " + (data.error || "Inconnue");
      }
    }
  </script>
</body>
</html>
